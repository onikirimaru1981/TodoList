(()=>{"use strict";var t={d:(e,o)=>{for(var a in o)t.o(o,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:o[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{L:()=>i});class e{static fromJson({id:t,tarea:o,completado:a,creado:s}){const d=new e(o);return d.id=t,d.completado=a,d.creado=s,d}constructor(t){this.tarea=t,this.id=(new Date).getTime(),this.completado=!1,this.creado=new Date}}const o=document.querySelector(".todo-list"),a=document.querySelector(".new-todo"),s=document.querySelector(".clear-completed"),d=document.querySelector(".filters"),c=document.querySelectorAll(".filtro"),r=document.querySelector(".todo-count"),l=t=>{const e=` <li class="${t.completado?"completed":""}" data-id="${t.id}">\n\t\t\t\t\t\t<div class="view">\n\t\t\t\t\t\t\t<input class="toggle" type="checkbox"${t.completado?"checked":""} >\n\t\t\t\t\t\t\t<label>${t.tarea}</label>\n\t\t\t\t\t\t\t<button class="destroy"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<input class="edit" value="Create a TodoMVC template">\n\t\t\t\t\t</li> `,a=document.createElement("div");return a.innerHTML=e,o.append(a.firstElementChild),a.firstElementChild};a.addEventListener("keyup",(t=>{if(13===t.keyCode&&a.value.length>0){const t=new e(a.value);i.nuevoTodo(t),l(t),a.value=""}})),o.addEventListener("click",(t=>{const e=t.target.localName,a=t.target.parentElement.parentElement,s=a.getAttribute("data-id");e.includes("input")?(i.marcarCompletado(s),a.classList.toggle("completed")):e.includes("button")&&(i.eliminarTodo(s),o.removeChild(a))})),s.addEventListener("click",(()=>{i.eliminarCompletados();for(let t=o.children.length-1;t>=0;t--){const e=o.children[t];e.classList.contains("completed")&&o.removeChild(e)}})),d.addEventListener("click",(t=>{console.log(t.target.text);const e=t.target.text;if(e){c.forEach((t=>t.classList.remove("selected"))),t.target.classList.add("selected");for(const t of o.children){t.classList.remove("hidden");const o=t.classList.contains("completed");switch(e){case"Pendientes":o&&t.classList.add("hidden");break;case"Completados":o||t.classList.add("hidden")}}}}));const i=new class{constructor(){this.cargarLocalStorage(),this.countTodo()}nuevoTodo(t){this.todos.push(t),this.guardarLocalStorage(),this.countTodo()}eliminarTodo(t){this.todos=this.todos.filter((e=>e.id!=t)),this.guardarLocalStorage(),this.countTodo()}marcarCompletado(t){for(const e of this.todos)if(e.id==t){e.completado=!e.completado,this.guardarLocalStorage(),this.countTodo();break}}eliminarCompletados(){this.todos=this.todos.filter((t=>!t.completado)),this.guardarLocalStorage}guardarLocalStorage(){localStorage.setItem("todo",JSON.stringify(this.todos))}cargarLocalStorage(){this.todos=localStorage.getItem("todo")?JSON.parse(localStorage.getItem("todo")):[],this.todos=this.todos.map(e.fromJson)}countTodo(){let t=0,e=r.firstElementChild;for(let e of this.todos)!0==!e.completado&&t++;e.innerHTML=t}};i.todos.forEach((t=>l(t)))})();